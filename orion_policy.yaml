version: 1
toggles:
  internet_enabled: true
  store_web_to_ltm: true
  allow_pdfs: false
  quarantine_mode: false
  
sources:
  # Optional: keep him focused
  allowlist:
    - "*.uhaul.com"
    - "wikipedia.org"
    - "docs.python.org"
    - "*.gov"
  denylist:
    - "x.com"
    - "twitter.com"
    
fetch:
  user_agent: "Orion/1.0 (local)"
  max_requests_per_hour: 30
  request_timeout_sec: 20
  retries: 1
  robots_txt_respect: true
  
crawl:
  max_depth: 2
  max_pages: 6
  same_domain_only: true
  same_path_preferred: true
  follow_pdf_links: false
    
summarize:
  max_output_tokens: 700
dedupe:
  cosine_threshold: 0.92
score:
  weights: {embedding: 0.65, recency: 0.2, source_trust: 0.1, interactions: 0.05}
ttl_days:
  news: 30
  docs: 365
budgets:
  daily_new_tokens: 30000
  per_topic_cap: 200

# orion_policy.yaml  (additions)
non_destructive: true
allow_delete: false

ingest_defaults:
  crawl_depth: 1
  crawl_pages_cap: 10
  respect_robots_txt: true
  allowed_domains: []       # will be filled from sources.allowlist by loader
  blocked_domains: []
  user_agent: "OrionLTM/1.0"
  follow_pdf_links: false   # mirrors your existing flag

content_filters:
  min_chars: 32
  max_chars: 8000
  drop_if_contains:
    - "(?i)password:\\s*\\S+"
    - "(?i)api[_-]?key\\s*[:=]\\s*\\S+"
    - "(?i)secret\\s*[:=]\\s*\\S+"

pii_redaction:
  enabled: true
  rules:
    - { name: email, pattern: "[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[A-Za-z]{2,}", replacement: "[REDACTED_EMAIL]" }
    - { name: phone, pattern: "(?:\\+?\\d[\\s.-]?){7,}\\d", replacement: "[REDACTED_PHONE]" }

dedupe:
  enabled: true
  method: cosine           # honors your cosine_threshold below
  cosine_threshold: 0.92   # pulled from your file

metadata_enrichment:
  topic_from_call: true
  default_topic: "web"
  source_fields: ["source_url", "source_title", "crawl_timestamp"]
  tags: ["ltm", "rag", "web"]

write:
  collection: "orion_web_ltm"
  duplicate_strategy: "skip_existing"
  upsert: true
  id_fields: ["source_url", "sha1_content"]

persona:
  collection: "orion_persona_ltm"
  max_lines_per_run: 1000
  drop_if_contains: ["(?i)^\\[.*\\]$"]

episodic:
  collection: "orion_episodic_ltm"
  allowed_roles: ["user", "assistant", "system"]
  normalize_roles: true
